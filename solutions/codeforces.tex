\section{Codeforces}

\ptitle{[CF1763E] Node Pairs}{zmy}
\prob 要求构造一个有向图，恰好有 $p (1 \leq p \leq 2 \cdot 10^5)$ 个点对互相可达。在这个前提下，要求使用的顶点数尽可能少。顶点数相同时，要求单向可达的点对尽可能多
\sol 每个有向图都可以被缩点成一个 DAG,对于每个强连通分量内部肯定是两两可达的，且夸强连通分量的点对一定不是双向可达的。因此我们可以想到用 DP 来计算需要的最小顶点数。再次之上，为了使得单向可达的点对尽可能多，我们的 DAG 一定是一条链的形状，因此我们可以同时 dp 单向可达的点对个数。

\ptitle{[CF1904E] Tree Queries}{shaosy}
\prob 给定一棵树, 多组询问. 每组询问指定一个询问点和一些删除点, 问将删除点删除后树中询问点可达的最远距离为多少
\sol 离线处理. 首先, 询问某一点在书中可达最远距离等价于将该点视为树的根并询问树的深度. 考虑如何换根时更新树的深度. 考虑dfs序. 通过维护每个点的in和out时刻, 配合线段树, 可以用换根dp类似的思想来动态维护每个点当前的深度. 根通过边u-v从u换到v等价于, 给v的子树深度区间减1, 给其他节点深度加1. 然后讨论删除点. 删除点如果在原树中不是新的根节点(x) 的父节点,则可以视作将删除点的子树的深度区间减去正无穷. 而如果是, 则可以视作将除了删除点与点x相连的子树之外所有点的深度区间减去正无穷. 在这种更新下, 当前树的深度就是所有点深度的最大值.

\ptitle{[CF1904F] Beautiful Tree}{shaosy}
\prob 给定一棵树和多组限制条件,要求给树上每一个点赋值使得其成为一个permutation并满足所有限制条件. 每组限制条件形如 u-v-x, 要求使得在路径u-v上的点中x的值最大/最小
\sol 考虑树链剖分+线段树优化建图. 这样, 每一段树上路径可以用不超过$\log{n}$个线段, 每个线段又不超过$\log{n}$个点表示. 建立两颗线段树, 分别表示区间最大的点/区间最小的虚拟点, 而后暴力连边. 暴力连边后跑一边拓扑排序即可. 若存在环,则说明不存在可行解. 线段树优化建图中需要注意为了避免出现自环, 对路径u-v向路径x连边/或其反边连边时, 需要特判x是否在该路径中. 如果在该路径中必须裂成u-x和x-v两段(不包括x)